*** Starting uWSGI 2.0.17.1 (64bit) on [Wed Dec 12 14:40:41 2018] ***
compiled with version: 4.2.1 Compatible Apple LLVM 9.1.0 (clang-902.0.39.2) on 11 September 2018 07:25:21
os: Darwin-17.7.0 Darwin Kernel Version 17.7.0: Thu Jun 21 22:53:14 PDT 2018; root:xnu-4570.71.2~1/RELEASE_X86_64
nodename: MacBook-Pro.local
machine: x86_64
clock source: unix
pcre jit disabled
detected number of CPU cores: 8
current working directory: /Users/yahui.yan/SourceTree/yyh/faiss-web-service
detected binary path: /Users/yahui.yan/miniconda2/bin/uwsgi
chdir() to /Users/yahui.yan/SourceTree/yyh/faiss-web-service/bin/../src
your processes number limit is 1418
your memory page size is 4096 bytes
detected max file descriptor number: 12544
lock engine: OSX spinlocks
thunder lock: disabled (you can enable it with --thunder-lock)
uWSGI http bound on :5000 fd 4
uwsgi socket 0 bound to TCP address 127.0.0.1:61614 (port auto-assigned) fd 3
Python version: 2.7.13 |Continuum Analytics, Inc.| (default, Dec 20 2016, 23:05:08)  [GCC 4.2.1 Compatible Apple LLVM 6.0 (clang-600.0.57)]
Python main interpreter initialized at 0x7ffaa8600f10
python threads support enabled
your server socket listen backlog is limited to 100 connections
your mercy for graceful operations on workers is 60 seconds
mapped 416560 bytes (406 KB) for 8 cores
*** Operational MODE: preforking+threaded ***
initialized 114 metrics
memory allocated for metrics storage: 466944 bytes (0 MB)
Failed to load GPU Faiss: No module named swigfaiss_gpu
Faiss falling back to CPU-only.
[uwsgi-signal] signum 3 registered (wid: 0 modifier1: 0 target: workers)


========================================================================
Getting Faiss index of [1]
Traceback (most recent call last):
  File "./app.py", line 11, in <module>
    app.register_blueprint(FaissIndexBlueprint)
  File "/Users/yahui.yan/miniconda2/lib/python2.7/site-packages/flask/app.py", line 64, in wrapper_func
    return f(self, *args, **kwargs)
  File "/Users/yahui.yan/miniconda2/lib/python2.7/site-packages/flask/app.py", line 951, in register_blueprint
    blueprint.register(self, options, first_registration)
  File "/Users/yahui.yan/miniconda2/lib/python2.7/site-packages/flask/blueprints.py", line 154, in register
    deferred(state)
  File "/Users/yahui.yan/miniconda2/lib/python2.7/site-packages/flask/blueprints.py", line 129, in wrapper
    func(state)
  File "./faiss_index/blueprint.py", line 39, in record
    monitor_file)
  File "./faiss_index/blueprint.py", line 126, in init_faiss_index
    update_index(get_faiss_index, get_faiss_id_to_vector, cur, faiss_index_list)
  File "./faiss_index/blueprint.py", line 99, in update_index
    faiss_index_list[1 - cur[0]] = FaissIndex(get_faiss_index(), get_faiss_id_to_vector())
  File "/Users/yahui.yan/SourceTree/yyh/faiss-web-service/bin/../faiss_web_service_config/faiss_index_local_file_test.py", line 13, in GET_FAISS_ID_TO_VECTOR
    ids_vectors = pickle.load(f)
  File "/Users/yahui.yan/miniconda2/lib/python2.7/pickle.py", line 1384, in load
    return Unpickler(file).load()
  File "/Users/yahui.yan/miniconda2/lib/python2.7/pickle.py", line 864, in load
    dispatch[key](self)
  File "/Users/yahui.yan/miniconda2/lib/python2.7/pickle.py", line 1157, in load_get
    self.append(self.memo[self.readline()[:-1]])
KeyboardInterrupt
unable to load app 0 (mountpoint='') (callable not found or import error)
*** no app loaded. going in full dynamic mode ***
*** uWSGI is running in multiple interpreter mode ***
spawned uWSGI master process (pid: 12322)
spawned uWSGI worker 1 (pid: 12331, cores: 2)
spawned uWSGI worker 2 (pid: 12332, cores: 2)
writing pidfile to /Users/yahui.yan/SourceTree/yyh/faiss-web-service/bin/../env/master_project.pid
spawned uWSGI worker 3 (pid: 12333, cores: 2)
writing pidfile to /Users/yahui.yan/SourceTree/yyh/faiss-web-service/bin/../env/master_project.pid
spawned uWSGI worker 4 (pid: 12334, cores: 2)
writing pidfile to /Users/yahui.yan/SourceTree/yyh/faiss-web-service/bin/../env/master_project.pid
writing pidfile to /Users/yahui.yan/SourceTree/yyh/faiss-web-service/bin/../env/master_project.pid
metrics collector thread started
writing pidfile to /Users/yahui.yan/SourceTree/yyh/faiss-web-service/bin/../env/master_project.pid
spawned uWSGI http 1 (pid: 12335)
added new file to monitor /Users/yahui.yan/SourceTree/faiss-web-service/faiss_index_files/index.timestamp
SIGINT/SIGQUIT received...killing workers...
gateway "uWSGI http 1" has been buried (pid: 12335)
worker 4 buried after 0 seconds
worker 3 buried after 0 seconds
worker 2 buried after 0 seconds
worker 1 buried after 0 seconds
goodbye to uWSGI.
